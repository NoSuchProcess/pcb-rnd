print [@

CFLAGS=@libs/sul/glib/cflags@ -I.. -I../src_3rd -DSCMDIR="\"$(LIBDIR)\""
LDFLAGS=@libs/sul/glib/ldflags@
EXE=@sys/ext_exe@
CC=@cc/cc@

HASHOBJ=../src_3rd/genht/hash.o ../src_3rd/genht/htsp.o
VECTOBJ=../src_3rd/genvector/genvector.a
LISTOBJ=../src_3rd/genlist/genlist.a

gsch2pcb-rnd$(EXE): gsch2pcb.o ../src/libpcb_fp.o ../src/portability.o ../src/ds.o ../src/paths.o $(HASHOBJ) $(VECTOBJ) $(LISTOBJ)
	$(CC) gsch2pcb.o ../src/libpcb_fp.o  ../src/portability.o ../src/ds.o ../src/paths.o $(HASHOBJ) $(VECTOBJ) $(LISTOBJ)  -o gsch2pcb-rnd$(EXE) $(LDFLAGS)

gsch2pcb.o: gsch2pcb.c ../src/libpcb_fp.h ../config.h  ../config.manual.h  ../config.auto.h
	$(CC) -c $(CFLAGS) gsch2pcb.c -o gsch2pcb.o

$(HASHOBJ):
	cd ../src_3rd/genht && make

$(VECTOBJ):
	cd ../src_3rd/genvector && make

$(LISTOBJ):
	cd ../src_3rd/genlist && make

../src/portability.o:
	cd ../src && make portability.o

../src/ds.o:
	cd ../src && make ds.o

../src/libpcb_fp.o:
	cd ../src && make libpcb_fp.o

install_:
	$(MKDIR) "$(BINDIR)" "$(LIBDIR)"
	$(CPC) "`pwd`/gsch2pcb-rnd$(EXE)" "$(BINDIR)/gsch2pcb-rnd$(EXE)"
	$(CPC) "`pwd`/fp2anim" "$(BINDIR)/fp2anim"
	$(CPC) "`pwd`/gnet-gsch2pcb-rnd.scm" "$(LIBDIR)/gnet-gsch2pcb-rnd.scm"

install:
	make install_ CPC="$(CP)"

linstall:
	make install_ CPC="$(LN)"

uninstall:
	$(RM) "$(BINDIR)/gsch2pcb-rnd$(EXE)"
	$(RM) "$(BINDIR)/fp2anim"
	$(RM) "$(LIBDIR)/gnet-gsch2pcb-rnd.scm"


clean:
	$(RM) gsch2pcb-rnd$(EXE) gsch2pcb.o

include ../Makefile.conf

@]
