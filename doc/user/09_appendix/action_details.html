<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- AUTOGENERATED FILE, DO NOT EDIT ; generator is action_compiler.sh (run make) -->
<html>
<body>
<h1> pcb-rnd actions </h1>
<h2> Action reference (details) </h2>


<h3 id="addrats">addrats</h3>
<p>
Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 AllRats  
<td>
 Create rat lines for all loaded nets that aren't already connected on       with copper.   
<tr>

<th>
 SelectedRats  
<td>
 Similarly, but only add rat lines for nets connected to selected pins       and pads.   
<tr>

<th>
@item Close  
<td>
 Selects the shortest unselected rat on the board. 
</table>
  

<h3 id="atomic">atomic</h3>
<p>
This action allows making multiple-action bindings into an atomic operation that will be undone by a single Undo command.  For example, to optimize rat lines, you'd delete the rats and re-add them.  To group these into a single undo, you'd want the deletions and the additions to have the same undo serial number.  So, you 
<i>Save</i>
, delete the rats, 
<i>Restore</i>
, add the rats - using the same serial number as the deletes, then 
<i>Block</i>
, which checks to see if the deletions or additions actually did anything.  If not, the serial number is set to the saved number, as there's nothing to undo.  If something did happen, the serial number is incremented so that these actions are counted as a single undo step. 
<p>
 Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Save  
<td>
 Saves the undo serial number.   
<tr>

<th>
 Restore  
<td>
 Returns it to the last saved number.   
<tr>

<th>
 Close  
<td>
 Sets it to 1 greater than the last save.   
<tr>

<th>
 Block  
<td>
 Does a Restore if there was nothing to undo, else does a Close. 
</table>
 

<h3 id="changeclearsize">changeclearsize</h3>
<p>
If the solder mask is currently showing, this action changes the solder mask cutout size. If the mask is not showing, this action changes the polygon clearance. 

<h3 id="changeflag">changeflag</h3>
<p>
Toggles the given flag on the indicated object(s).  The flag may be one of the flags listed above (thermal, join).  The value may be the number 0 or 1.  If the value is 0, the flag is cleared.  If the value is 1, the flag is set. 

<h3 id="changejoin">changejoin</h3>
<p>
The join flag determines whether a line or arc, drawn to intersect a polygon, electrically connects to the polygon or not.  When joined, the line/arc is simply drawn over the polygon, making an electrical connection.  When not joined, a gap is drawn between the line and the polygon, insulating them from each other. 

<h3 id="changesize">changesize</h3>
<p>
For lines and arcs, this changes the width.  For padstacks, this changes the shape size (but does not touch the hole diameter). For texts, this changes the scaling factor.  For subcircuits, this changes the width of the silk layer lines and arcs for this subcircuit (TODO: is this still true?).  

<h3 id="changesizes">changesizes</h3>
<p>
Call ChangeSize, ChangeDrillSize and ChangeClearSize with the same arguments. If any of them did not fail, return success. 

<h3 id="chklayer">chklayer</h3>
<p>
Returns 1 if the specified layer is the active layer. 

<h3 id="chkrst">chkrst</h3>
<p>
Return 1 if route_style_id matches pen. 

<h3 id="chkview">chkview</h3>
<p>
Return 1 if layerid is visible. Intended for menu item 'checked' fields. 

<h3 id="connection">connection</h3>
<p>
Connections found with this action will be highlighted in the "connected-color" color and will have the "found" flag set. 
<p>
 Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Find  
<td>
 The net under the cursor is "found".   
<tr>

<th>
 ResetLinesAndPolygons  
<td>
 Any "found" lines and polygons are marked "not found".   
<tr>

<th>
 ResetPinsAndVias  
<td>
 Any "found" pins and vias are marked "not found".   
<tr>

<th>
 Reset  
<td>
 All "found" objects are marked "not found".  
</table>
  

<h3 id="cursor">cursor</h3>
<p>
This action moves the mouse cursor.  Unlike other actions which take coordinates, this action's coordinates are always relative to the user's view of the board.  Thus, a positive 
<i>DeltaUp</i>
 may move the cursor away from the board origin if the board is inverted (flipped, looked from the bottom). 
<p>
 
<i>Type</i>
 is one of 
<i>
Pan
</i>
 or 
<i>
Warp
</i>
. 
<i>
Pan
</i>
 causes the viewport to move such that the crosshair is under the mouse cursor. 
<i>
Warp
</i>
 causes the mouse cursor to move to be above the crosshair. 
<p>
 
<i>Units</i>
 can be one of the following: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<td>
mil
<br>
mm  
<td>
The cursor is moved by that amount, in board units.   
<tr>

<td>
grid  
<td>
The cursor is moved by that many grid points.   
<tr>

<td>
view  
<td>
The values are percentages of the viewport's view. Thus, a pan of      
<i>
100
</i>
 would scroll the viewport by exactly the width of the current view.    
<tr>

<td>
board  
<td>
 The values are percentages of the board size. Thus, a move of       
<i>
50,50
</i>
 moves you halfway across the board.  
</table>
 

<h3 id="display">display</h3>
<p>
Changes random display related global states. 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 SubcID 
<br>
 Description 
<br>
 Value  
<td>
Specify the subcircuit ID template to be printed on the subcircuit layer   
<tr>

<th>
 Redraw  
<td>
Redraw the whole board.   
<tr>

<th>
 ToggleAllDirections  
<td>
When clear, lines can be drawn at any angle.  When set, lines are      restricted to multiples of 45 degrees and requested lines may be      broken up according to the clip setting.   
<tr>

<th>
 CycleClip  
<td>
Changes the way lines are restricted to 45 degree increments. The      various settings are: straight only, orthogonal then angled, and angled      then orthogonal. If AllDirections is set, this action disables it.   
<tr>

<th>
 CycleCrosshair  
<td>
Changes crosshair drawing. Crosshair may accept form of 4-ray,      8-ray and 12-ray cross.   
<tr>

<th>
 ToggleRubberBandMode  
<td>
If set, moving an object moves all the lines attached to it too.   
<tr>

<th>
 ToggleStartDirection  
<td>
If set, each time you set a point in a line, the Clip toggles between      orth-angle and angle-ortho.   
<tr>

<th>
 ToggleUniqueNames  
<td>
If set, you will not be permitted to change the name of an element to      match that of another element.   
<tr>

<th>
 ToggleSnapPin  
<td>
If set, pin centers and pad end points are treated as additional grid      points that the cursor can snap to.   
<tr>

<th>
 ToggleSnapOffGridLine  
<td>
If set, snap at some sensible point along a line.   
<tr>

<th>
 ToggleHighlightOnPoint  
<td>
If set, highlights lines and arcs when the crosshair is on one of their      two (end) points.   
<tr>

<th>
 ToggleLocalRef  
<td>
If set, the mark is automatically set to the beginning of any move, so      you can see the relative distance you've moved.   
<tr>

<th>
 ToggleThindraw  
<td>
If set, objects on the screen are drawn as outlines (lines are drawn      as center-lines). This lets you see line endpoints hidden under pins,      for example.   
<tr>

<th>
 ToggleThindrawPoly  
<td>
If set, polygons on the screen are drawn as outlines.   
<tr>

<th>
 ToggleShowDRC  
<td>
If set, pending objects (i.e. lines you're in the process of drawing)      will be drawn with an outline showing how far away from other copper      you need to be.   
<tr>

<th>
 ToggleLiveRoute  
<td>
If set, the progress of the autorouter will be visible on the screen.   
<tr>

<th>
 ToggleAutoDRC  
<td>
If set, you will not be permitted to make connections which violate      the current DRC and netlist settings.   
<tr>

<th>
 ToggleCheckPlanes  
<td>
If set, lines and arcs aren't drawn, which usually leaves just the      polygons.  If you also disable all but the layer you're interested in,      this allows you to check for isolated regions.   
<tr>

<th>
 ToggleOrthoMove  
<td>
If set, the crosshair is only allowed to move orthogonally from its      previous position.  I.e. you can move a subcircuit or line up, down,      left, or right, but not up+left or down+right.   
<tr>

<th>
 ToggleName  
<td>
Selects whether the pinouts show the pin names or the pin numbers.   
<tr>

<th>
 ToggleLockNames  
<td>
If set, text will ignore left mouse clicks and actions that work on      objects under the mouse. You can still select text with a lasso (left      mouse drag) and perform actions on the selection.   
<tr>

<th>
 ToggleOnlyNames  
<td>
If set, only text will be sensitive for mouse clicks and actions that      work on objects under the mouse. You can still select other objects      with a lasso (left mouse drag) and perform actions on the selection.   
<tr>

<th>
 ToggleClearLine  
<td>
When set, the clear-line flag causes new lines and arcs to have their      "clear polygons" flag set, so they won't be electrically connected      to any polygons they overlap.   
<tr>

<th>
 ToggleFullPoly  
<td>
When set, the full-poly flag causes new polygons to have their      "full polygon" flag set, so all parts of them will be displayed      instead of only the biggest one.   
<tr>

<th>
 ToggleGrid  
<td>
Resets the origin of the current grid to be wherever the crosshair is.      If you provide two numbers after this, the origin is set to that      coordinate.   
<tr>

<th>
 Grid  
<td>
Toggles whether the grid is displayed or not.   
<tr>

<th>
 Pinout  
<td>
Causes the pinout of the subcircuit indicated by the cursor to be      displayed, usually in a separate window.   
<tr>

<th>
 PinOrPadName  
<td>
Toggles whether the names of terminals will be      displayed. If the cursor is over an subcircuit, all of its terminals      are affected.  
</table>
  

<h3 id="drc">drc</h3>
<p>
Note that the design rule check uses the current board rule settings, not the current style settings. 

<h3 id="executefile">executefile</h3>
<p>
Lines starting with 
<i>
#
</i>
 are ignored.  

<h3 id="getxy">getxy</h3>
<p>
Prompts the user for a coordinate, if one is not already selected. 

<h3 id="loadfrom">loadfrom</h3>
<p>
This action assumes you know what the filename is.  The various GUIs should have a similar 
<a href="#load">load</a>
 action where the filename is optional, and will provide their own file selection mechanism to let you choose the file name. 
<p>
 Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Layout  
<td>
 Loads an entire PCB layout, replacing the current one.   
<tr>

<th>
 LayoutToBuffer  
<td>
 Loads an entire PCB layout to the paste buffer.   
<tr>

<th>
 ElementToBuffer  
<td>
 Loads the given footprint file into the paste buffer. Footprint files       contain only a single subcircuit definition in one of the various       supported file formats.   
<tr>

<th>
 Netlist  
<td>
 Loads a new netlist, replacing any current netlist.   
<tr>

<th>
 Revert  
<td>
 Re-loads the current layout from its disk file, reverting any changes       you may have made.  
</table>
  

<h3 id="markcrosshair">markcrosshair</h3>
<p>
The "mark" is a small X-shaped target on the display which is treated like a second origin (the normal origin is the upper let corner of the board).  The GUI will display a second set of coordinates for this mark, which tells you how far you are from it. 
<p>
 If no argument is given, the mark is toggled - disabled if it was enabled, or enabled at the current cursor position of disabled.  If the 
<i>Center</i>
 argument is given, the mark is moved to the current cursor location. 

<h3 id="message">message</h3>
<p>
This action displays a message to the log window.  This action is primarily provided for use by scripts and external programs which may interface with pcb-rnd. If multiple arguments are given, each one is sent to the log window followed by a newline. 

<h3 id="mode">mode</h3>
<p>
Selects the tool or changes tool related global states. 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Arc 
<br>
 Arrow 
<br>
 Copy 
<br>
 InsertPoint 
<br>
 Line 
<br>
 Lock           
<br>
 Move 
<br>
 None 
<br>
 PasteBuffer 
<br>
 Polygon 
<br>
 Rectangle           
<br>
 Remove 
<br>
 Rotate 
<br>
 Text 
<br>
 Thermal 
<br>
 Via 
<br>
 ...  
<td>
 Select the indicated tool.   
<tr>

<th>
 Notify  
<td>
 Called when you press the mouse button, or move the mouse.   
<tr>

<th>
 Release  
<td>
 Called when you release the mouse button.   
<tr>

<th>
 Cancel  
<td>
 Cancels any pending tool activity, allowing you to restart elsewhere.       For example, this allows you to start a new line rather than attach a       line to the previous line.   
<tr>

<th>
 Escape  
<td>
 Similar to Cancel but calling this action a second time will return       to the Arrow tool.   
<tr>

<th>
 Stroke  
<td>
 If pcb-rnd was built with libstroke, this invokes the stroke       input method.  If not, this will restart a drawing mode if you were       drawing, else it will select objects.   
<tr>

<th>
 Save  
<td>
 Remembers the current tool.   
<tr>

<th>
 Restore  
<td>
 Restores the tool to the last saved tool.  
</table>
 

<h3 id="morphpolygon">morphpolygon</h3>
<p>
If a polygon is divided into unconnected "islands", you can use this command to convert the otherwise disappeared islands into separate polygons. Be sure the cursor is over a portion of the polygon that remains visible. Very small islands that may flake off are automatically deleted. 

<h3 id="netlist">netlist</h3>
<p>
Each of these actions apply to a specified set of nets. 
<i>net</i>
 and 
<i>pin</i>
 are patterns which match one or more nets or pins; these patterns may be full names or regular expressions.  If an exact match is found, it is the only match; if no exact match is found, 
<b>
then
</b>
 the pattern is tried as a regular expression. 
<p>
 If neither 
<i>net</i>
 nor 
<i>pin</i>
 are specified, all nets apply. If 
<i>net</i>
 is specified but not 
<i>pin</i>
, all nets matching 
<i>net</i>
 apply.  If both are specified, nets which match 
<i>net</i>
 and contain a pin matching 
<i>pin</i>
 apply. 
<p>
 
<i>freeze</i>
, 
<i>thaw</i>
 and 
<i>forcethaw</i>
 temporarily prevents changes to the netlist from being reflected in the GUI. For example, if you need to make multiple changes, you 
<i>freeze</i>
 the netlist, make the changes, then 
<i>thaw</i>
 it. Note that freeze/thaw requests may nest, with the netlist being fully thawed only when all pending freezes are thawed.  You can bypass the nesting by using 
<i>forcethaw</i>
, which resets the freeze count and immediately updates the GUI. 
<p>
 Argument summary: 
<p>
 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 find  
<td>
 Nets which apply are marked @emph{found} and are drawn in the       
<i>
connected-color
</i>
 color.   
<tr>

<th>
 select  
<td>
 Nets which apply are selected.   
<tr>

<th>
 rats  
<td>
 Nets which apply are marked as available for the rats nest.   
<tr>

<th>
 norats  
<td>
 Nets which apply are marked as not available for the rats nest.   
<tr>

<th>
 clear  
<td>
 Clears the netlist.   
<tr>

<th>
 add  
<td>
 Add the given pin to the given netlist, creating either if needed.   
<tr>

<th>
 swap  
<td>
 Swap the connections one end of two selected rats and pins.   
<tr>

<th>
 sort  
<td>
 Called after a list of add's, this sorts the netlist.   
<tr>

<th>
 freeze 
<br>
 thaw 
<br>
 forcethaw  
<td>
 Temporarily prevents changes to the netlist from being reflected in the GUI. 
</table>
 

<h3 id="new">new</h3>
<p>
If a name is not given, one is prompted for. 

<h3 id="polygon">polygon</h3>
<p>
Argument: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Close  
<td>
 Creates the final segment of the polygon.  This may fail if clipping       to 45 degree lines is switched on, in which case a warning is issued.   
<tr>

<th>
 CloseHole  
<td>
 Creates the final segment of the polygon hole.  This may fail if clipping       to 45 degree lines is switched on, in which case a warning is issued.   
<tr>

<th>
 PreviousPoint  
<td>
 Resets the newly entered corner to the previous one. The Undo action       will call Polygon(PreviousPoint) when appropriate to do so.  
</table>
  

<h3 id="printcalibrate">printcalibrate</h3>
<p>
This will print a calibration page, which you would measure and type the measurements in, so that future printouts will be more precise. 

<h3 id="promptfor">promptfor</h3>
<p>
This is mostly for testing the lesstif HID interface. The parameters are passed to the 
<i>
prompt_for()
</i>
 HID function, causing the user to be prompted for a response. The respose is simply printed to the user's stdout.   

<h3 id="quit">quit</h3>
<p>
If you have unsaved changes, you will be prompted to confirm (or save) before quitting. 

<h3 id="redo">redo</h3>
<p>
The 
<a href="#redo">redo</a>
 action allows you to recover from the last undo command. You might want to do this if you thought that undo was going to revert something other than what it actually did (in case you are confused about which operations are un-doable), or if you have been backing up through a long undo list and over-shoot your stopping point.  Any change that is made since the undo in question will trim the redo list.  For example if you add ten lines, then undo three of them you could use redo to put them back, but if you move a line on the board before performing the redo, you will lose the ability to "redo" the three "undone" lines. 

<h3 id="saveto">saveto</h3>
<p>
Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Layout  
<td>
 Saves the current layout.   
<tr>

<th>
 LayoutAs  
<td>
 Saves the current layout, and remembers the filename used.   
<tr>

<th>
 AllConnections  
<td>
 Save all connections to a file.   
<tr>

<th>
 AllUnusedPins  
<td>
 List all unused pins to a file.   
<tr>

<th>
 ElementConnections  
<td>
 Save connections to the subcircuit at the cursor to a file.   
<tr>

<th>
 PasteBuffer  
<td>
 Save the content of the active Buffer to a file. This is       the graphical way to create a footprint.  
</table>
 

<h3 id="select">select</h3>
<p>
Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 Object 
<br>
 ToggleObject  
<td>
 Selects the object under the cursor.   
<tr>

<th>
 Block  
<td>
 Selects all objects in a rectangle indicated by the cursor.   
<tr>

<th>
 All  
<td>
 Selects all objects on the board.   
<tr>

<th>
 Connection  
<td>
 Selects all connections with the ``found'' flag set.   
<tr>

<th>
 Convert  
<td>
 Converts the selected objects to a subcircuit.  This uses the highest       numbered paste buffer. 
</table>
 

<h3 id="selectlayer">selectlayer</h3>
<p>
The specified layer becomes the currently active layer.  It is made visible if it is not already visible 

<h3 id="setsame">setsame</h3>
<p>
When invoked over any line, arc, polygon, or via, this changes the current layer to be the layer that item is on, and changes the current sizes (thickness, clearance, etc) according to that item. 

<h3 id="setunits">setunits</h3>
<p>

<table border=1 cellspacing=0>
  
<tr>

<th>
 mil  
<td>
 Sets the display units to mils (1/1000 inch).   
<tr>

<th>
 mm  
<td>
 Sets the display units to millimeters. 
</table>
 

<h3 id="toggleview">toggleview</h3>
<p>
If you pass an integer, that layer is specified by index (the first layer is 
<i>
1
</i>
, etc).  If you pass a layer name, that layer is specified by name.  When a layer is specified, the visibility of the layer group containing that layer is toggled. 
<p>
 If you pass a special layer name, the visibility of those components (silk, rats, etc) is toggled.  Note that if you have a layer named the same as a special layer, the layer is chosen over the special layer. 

<h3 id="undo">undo</h3>
<p>
The unlimited undo feature of pcb-rnd allows you to recover from most operations that materially affect you work.  Calling 
<a href="#pcb_undo">pcb_undo</a>
 without any parameter recovers from the last (non-undo) operation. 
<i>ClearList</i>
 is used to release the allocated memory. 
<i>ClearList</i>
 is called whenever a new layout is started or loaded. See also 
<a href="#redo">redo</a>
. 
<p>
 Note that undo groups operations by serial number; changes with the same serial number will be undone (or redone) as a group.  See 
<a href="#atomic">atomic</a>
.  

<h3 id="unselect">unselect</h3>
<p>
Arguments: 
<p>
 
<table border=1 cellspacing=0>
  
<tr>

<th>
 All  
<td>
 Unselect all objects.   
<tr>

<th>
 Block  
<td>
 Unselect all objects in a rectangle given by the cursor.   
<tr>

<th>
 Connection  
<td>
 Unselect all connections with the "found" flag set. 
</table>
   

</body>
</html>

