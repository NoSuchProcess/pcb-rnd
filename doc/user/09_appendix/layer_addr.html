<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title> pcb-rnd user manual </title>
	<meta http-equiv="Content-Type" content="text/html;charset=us-ascii">
	<link rel="stylesheet" type="text/css" href="../../default.css">
</head>
<body>
<h2> Layer addressing </h2>
<p>
When an action or configuration file requires a <i>layer</i> or
<i>layer group</i> to be specified, it is usually done using the <i>layer
address</i> or <i>layer group address</i> sytax specified below.
<p>
However, some old actions still require the raw id or name of
a layer or layer group; in that case, the addressing syntax will not work
and the required data has to be specified as is, without any prefix.

<h3> Layer group address </h3>
<p>
The layer group address is used to name one or more matching layer group(s).
If the code needs only one layer group and the address matches multiple,
always the first match is used (the layer group with the lowest ID).
<p>
A layer group address contains at most two parts: the base address
and optional supplements. The full version is <i>base(supplements)</i>,
but supplements can be omitted so <i>base</i> alone is also valid.
<p>
The <i>base</i> part is one of the following syntaxes:
<p>
<table border=1>
<tr><th>syntax
    <th> description
    <th> example
<tr><td> @groupname
    <td> find groups by their user assigned name (case sensitive string match)
    <td> <i>@mysignal</i><br>matches groups whose name is "mysignal"

<tr><td> location-material
    <td> find groups by their location and material
    <td> <i>bottom-copper</i><br>matches groups that are on the bottom side and are of copper

<tr><td> type[-type...]
    <td> same as location-material: types can really be used in any amount and any order, but matching groups have to match all types specified
    <td> <i>mask</i><br>matches any group that is a solder mask

<tr><td> type:offs
    <td> offs is a positive integer; use the Nth group of that type from top
    <td> <i>copper:2</i><br>matches the second copper layer group from the top; offs is counted from 1, +1 meaning top surface layer

<tr><td> type:-offs
    <td> -offs is a negative integer; use the Nth group of that type from bottom
    <td> <i>copper:-3</i><br>matches the third copper layer group from the bottom; offs is counted from 1, -1 meaning bottom surface layer
</table>
<p>
When supplements are specified, it's a comma separated list of key=value pairs.
Available supplements are:
<ul>
	<li> purpose: specify matching layer group purpose field
	<li> bloat: bloat or shrink objects by the specified value (e.g. 1mm), when transformations are available
	<li> <a href="#partial">partial</a>: only export objects with the EXPORTSEL flag set, when doing an export
	<li> (TODO: supplement for inversion)
</ul>
<p>
Supplement examples:
<table border=1 cellspacing=0>
	<tr> <td> top-doc(purpose=assy)
	     <td> the explicit top assembly layer group (by type)
	<tr> <td> top-virtual(purpose=assy)
	     <td> the autogenerated top assembly layer group (by type); this works only if there is no explicit assy layer (legacy designs)
	<tr> <td> top-paste(bloat=0.1mm)
	     <td> when using the address in CAM, export the top paste group with all objects bloated up by 0.1mm
	<tr> <td> virtual(purpose=pdrill)
	     <td> for example in CAM: export plated drilled holes (padstack side effects, but no slots)
	<tr> <td> virtual(purpose=pdrill,bloat=0.1mm)
	     <td> the above two combined
</table>


</body>
</html>
