<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title> pcb-rnd user manual </title>
	<meta http-equiv="Content-Type" content="text/html;charset=us-ascii">
	<link rel="stylesheet" type="text/css" href="../../default.css">
</head>
<body>
<h2> CAM support </h2>
<p>
The purpose of the CAM support is to provide an unified interface to export a
a board in different file formats, using different exporter plugins. The
interface consists a CLI layer (each export plugin's "cam" option) and
an optional GUI (the CAM plugin).

<h3> CAM export support in each other plugins </h3>
<p id="cli">
Each CAM-plugin-compatible exporter plugin offers an option called "cam".
The syntax and capabilities are the same for all exporter's cam option.
<p>
The syntax is:
<pre>
outfile=layergrp[,layergrp,...][;opt][;opt...]
</pre>
<p>
where:
<ul>
	<li> outfile is the output file name (unlatered by the code)
	<li> layergrp: one or more layer group definitions separated by comma (see below)
	<li> optionally a list of exporter options in the same format as on direct command line (e.g. --verbose); when there's overlap on any state/definition between opts and CAM operation, the effect of the opt is ignored
</ul>
Syntax of the layer group definition:
<ul>
	<li> @layername (e.g. "@top_copper" if the group's name is <i>top_copper</i>)
	<li> location-material (e.g. "top-copper" for any layer group that is copper and is on the top side)
	<li> type[-type...] (more generally: a list of layer type flags)
	<li> type:offs (e.g. "copper:+2" means the second copper layer group from the top, "copper:-3" means the third copper layer group from the bottom; offs is counted from 1, +1 meaning top outer layer, -1 meaning bottom outer layer)
</ul>
<p>
(TODO: optionally prefixed with + or - for polarity and something for bloat/shrink)
<p>
Examples:
<table border=1 cellspacing=0>
	<tr> <th> directive
	     <th> explanation
	<tr> <td> bot.gbr=@bottom_copper,@bottom_silk
	     <td> export layer groups called bottom_copper and bottom_silk (by group name)
	<tr> <td> asm=top-assy
	     <td> export the top assembly group, by type
	<tr> <td> fabrication.ps=fab
	     <td> export any fab layer group, by type
	<tr> <td> gnd=copper:2
	     <td> export the second copper layer group from the top (the first internal copper layer group under the top copper layer group, if it is a multilayer board; for 2 layer boards this will be the bottom copper layer group)
	<tr> <td> gnd=intern-copper:1
	     <td> similar to the above, but addresses the first internal copper layer group explicitly so it can not end up being the bottom copper layer group
	<tr> <td> pwr=copper:-2
	     <td> export the second copper layer group from the bottom (the first internal copper layer group above the bottom copper layer group, if it is a multilayer board; for 2 layer boards this will be the top copper layer group)
	<tr> <td> gnd=intern-copper:-1
	     <td> similar to the above, but addresses the last internal copper layer group explicitly so it can not end up being the top copper layer group
</table>

<h3> CAM plugin </h3>
<p>
The CAM plugin is a way to manage output "jobs": collections of cam export
settings for reproducing export packages in various formats. 
<p>
...
<p>
A job is a script that contains zero or more export directives, separated
by semicolons or newlines. An export directive is one of these:
<pre>
prefix path
plugin name[,option=value][,option=value,...]
write outfile=layergrp[,layergrp,...]
</pre>
<p>
The prefix directive sets up a file name prefix that is active until the
next prefix directive or end of the script. Before the first prefix directive
the prefix is an empty string. Any outfile will be prefixed with the current
prefix. (It is sort of a 'mkdir -p path; cd path' in the shell sense.)
<p>
The plugin directive selects a plugin and sets plugin specific options.
The plugin and options are active until the next plugin directive or the
end of the script. The first outfile directive must be preceeded by a
plugin directive.
<p>
The write directive argument has the same syntax as the cam argument for each
cam-capable exporter, <a href="#cli">see above</a>. Each write is a call
to an exporter the same way as if pcb-rnd was called with --cam and -x
with the exporter and options taken from the last plugin directive.
<p>
For example:
<pre>
TODO
</pre>


<h3> Tips for using with various exporters </h3>
<p>
When exporting to ps, consider using the --no-show-toc. It is
possible to combine multiple layers (e.g. top silk and top copper, which
may be useful for a single-layer board) using the --single-page option.

</body>
</html>
