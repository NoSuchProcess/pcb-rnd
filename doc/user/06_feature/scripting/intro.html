<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<title> pcb-rnd user manual </title>
	<meta http-equiv="Content-Type" content="text/html;charset=us-ascii">
</head>
<body>
<H1> Scripting intro </H1>
<p>
This document is an introduction to fungw for pcb-rnd users. It focuses on
scripting pcb-rnd and doesn't discuss fungw deeper than the minimum necessary.
Fungw is more generic than shown here.

<H2> 1. The big picture </H2>
<p>
The main interface between pcb-rnd internals and the outside world
(e.g. user interface, scripts) is called actions. An action is typically
a function with a few arguments that executes a smallish task. The
actions implemented by pcb-rnd are all functions written in C; some of
the actions are part of core pcb-rnd, others are implemented in plugins.
<p>
GUI operations, menu items, clicking on buttons all call these
actions. The advantage of this system is that the actions are accessible
in an user-interface-independent way: the same operations can be done
with and without GUI, initiated by an user with a mouse or by a script.
<p>
Thus the two main aspects of pcb-rnd scripting are:
<ul>
	<li> defining new actions in script; actions that then van be called from
	     the user interface or from other scripts
	<li> calling pcb-rnd actions from within the script to execute the actual
	     task
</ul>

<H2> 2. Defining actions </H2>
<p>
With fungw, every action is just a native function - the syntax varies
from scripting language to scripting language (see
<a href="rosetta/10_hello/"> the rosetta hello world example</a>). The
arguments of the function are the arguments of the action. The return value
of the function is the return value of the action.
<p>
For the <b>arguments</b>, new actions should try to follow the conventions that
can be found in already existing
<a href="../../09_appendix/action_reference.html"> core actions</a>
for similar purpose.
<p>
The <b>return value</b> depends on the purpose of the action. If the
action is used to calculate something, typically not changing any global
state (e.g. the board), it should return the value calculated, in whatever
scalar native data type the scripting language supports. If the action
is not called to get a value but to perform some changes, the return
value should be an integer: 0 means success, anything else means error.

<H2> 3. Calling actions </H2>
<p>
The script may call any action available at at a given time, independently
of whether the action is defined in pcb-rnd core, in plugins or in other
scripts. In most scripting languages the action call looks like a simple
function call: function arguments are the action's arguments, the return
value of the function is the return value generated by the action. The calls
are all single threaded, blocking calls. The script may use any scalar native
data type for action arguments without conversion, fungw will take care of
the conversions automatically.

<H2> 4. Action names </H2>
<p>
All action names are registered in lowercase version. The script shall
register lower case function names and action (function) calls should be
spelled lowercase too.

